#!/usr/bin/env python3
import matplotlib.pyplot as plt
import pandas as pd

if __name__ == "__main__":
    df = pd.read_csv("~/.local/share/weight/weight.csv")
    df["date"] = pd.to_datetime(df["date"])
    df.set_index("date", drop=True, inplace=True)

    weight = df["weight"]
    average = weight.rolling(window=7).mean()
    lines = weight.index[::7]

    plt.style.use("dark_background")

    plt.plot(weight, marker="o", label="Weight", color="tab:green")
    plt.plot(average, linestyle="dashed", color="tab:red", label="7 Day average",
             marker="o")
    plt.vlines(lines, weight.min(), weight.max(), linestyle="dashdot",
               color="tab:blue")
    
    plt.ylabel("Weight(kgs)")
    plt.xlabel("Date")
    plt.xticks(rotation="vertical")
    plt.legend()
    plt.show()
